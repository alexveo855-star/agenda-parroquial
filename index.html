<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente Parroquial Digital</title>
    
    <link href="/output.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #81b14f;
            --primary-hover: #6a9440;
            --primary-light: #e6f0e0;
            --secondary-color: #c4bd8b;
            --secondary-hover: #b3ab7a;
            --text-primary: #451b04;
            --text-secondary: #6e4a39;
            --background-light: #fdfcf7;
            --background-white: #ffffff;
            --border-color: #dbcccc;
            --danger-color: #e57373;
            --danger-hover: #d32f2f;
        }
        
        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--background-light);
            color: var(--text-primary);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        .calendar-grid {
            grid-template-columns: repeat(7, minmax(0, 1fr));
        }
        
        .calendar-day {
            min-height: 110px;
        }

        @media (max-width: 640px) {
            .calendar-day {
                min-height: 80px;
            }
        }
        
        .event-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #d1d5db; /* gray-300 */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #9ca3af; /* gray-400 */
        }
        
        .form-input {
            width: 100%;
            border-color: #d1d5db; /* gray-300 */
            border-radius: 0.375rem; /* rounded-md */
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* shadow-sm */
            transition: all 0.15s ease-in-out;
        }
        .form-input:focus {
            --tw-ring-color: var(--primary-color);
            border-color: var(--primary-color);
            box-shadow: 0 0 0 1px var(--primary-color);
        }
        
        .details-section {
            display: none;
        }
        
        .tab-pane {
            display: none;
        }
        
        .tab-pane.active {
            display: block;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: var(--background-white);
        }
        .btn-primary:hover {
            background-color: var(--primary-hover);
        }
        .btn-primary:focus {
            --tw-ring-color: var(--primary-color);
        }
        .btn-secondary {
             background-color: var(--secondary-color);
             color: var(--text-primary);
        }
        .btn-secondary:hover {
             background-color: var(--secondary-hover);
        }
        .btn-secondary:focus {
             --tw-ring-color: var(--secondary-color);
        }
        .btn-danger {
            background-color: var(--danger-color);
            color: var(--background-white);
        }
        .btn-danger:hover {
            background-color: var(--danger-hover);
        }
        .btn-danger:focus {
            --tw-ring-color: var(--danger-color);
        }
        .main-nav-btn.active .active-gradient {
            background-image: linear-gradient(#e2e2e2, #fefefe);
        }
        .main-nav-btn.active span,
        .main-nav-btn.active svg {
            color: var(--primary-color);
        }
        .animate-shake {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
            transform: translate3d(0, 0, 0);
        }
        @keyframes shake {
            10%, 90% { transform: translate3d(-1px, 0, 0); }
            20%, 80% { transform: translate3d(2px, 0, 0); }
            30%, 50%, 70% { transform: translate3d(-4px, 0, 0); }
            40%, 60% { transform: translate3d(4px, 0, 0); }
        }
    </style>
</head>
<body class="text-gray-800 bg-gray-50">

    <div id="app" class="flex flex-col h-screen">
        <header class="bg-white p-2 flex items-center justify-between border-b border-gray-200 gap-2 md:gap-6 w-full">
            <div class="flex items-center gap-2 md:gap-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" style="color: var(--primary-color)" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                <h1 class="text-xl md:text-2xl font-bold text-gray-800 flex-shrink-0">Asistente Parroquial</h1>
            </div>

            <div class="flex items-center gap-2 md:gap-4">
                <nav class="flex items-center gap-1 md:gap-2">
                    <button id="open-directory-btn" class="main-nav-btn group w-auto h-12 inline-flex transition-all duration-300 overflow-visible p-1 rounded-full">
                        <div class="w-full h-full bg-[linear-gradient(to_top,#ececec,#fff)] overflow-hidden shadow-[0_0_1px_rgba(0,0,0,0.07),0_0_1px_rgba(0,0,0,0.05),0_3px_3px_rgba(0,0,0,0.25),0_1px_3px_rgba(0,0,0,0.12)] p-1 rounded-full group-hover:shadow-none duration-300">
                            <div class="active-gradient w-full h-full text-base md:text-lg justify-center text-[#101010] bg-[linear-gradient(#f4f4f4,#fefefe)] group-hover:bg-[linear-gradient(#e2e2e2,#fefefe)] duration-200 items-center font-medium gap-2 inline-flex overflow-hidden px-3 md:px-4 py-2 rounded-full group-hover:text-[var(--primary-color)]">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                                <span class="hidden md:inline">Directorio</span>
                            </div>
                        </div>
                    </button>
                    <button id="open-agenda-btn" class="main-nav-btn group w-auto h-12 inline-flex transition-all duration-300 overflow-visible p-1 rounded-full">
                        <div class="w-full h-full bg-[linear-gradient(to_top,#ececec,#fff)] overflow-hidden shadow-[0_0_1px_rgba(0,0,0,0.07),0_0_1px_rgba(0,0,0,0.05),0_3px_3px_rgba(0,0,0,0.25),0_1px_3px_rgba(0,0,0,0.12)] p-1 rounded-full group-hover:shadow-none duration-300">
                            <div class="active-gradient w-full h-full text-base md:text-lg justify-center text-[#101010] bg-[linear-gradient(#f4f4f4,#fefefe)] group-hover:bg-[linear-gradient(#e2e2e2,#fefefe)] duration-200 items-center font-medium gap-2 inline-flex overflow-hidden px-3 md:px-4 py-2 rounded-full group-hover:text-[var(--primary-color)]">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"> <path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd" /> </svg>
                                <span class="hidden md:inline">Agenda</span>
                            </div>
                        </div>
                    </button>
                    <button id="open-anuncios-btn" class="main-nav-btn group w-auto h-12 inline-flex transition-all duration-300 overflow-visible p-1 rounded-full">
                        <div class="w-full h-full bg-[linear-gradient(to_top,#ececec,#fff)] overflow-hidden shadow-[0_0_1px_rgba(0,0,0,0.07),0_0_1px_rgba(0,0,0,0.05),0_3px_3px_rgba(0,0,0,0.25),0_1px_3px_rgba(0,0,0,0.12)] p-1 rounded-full group-hover:shadow-none duration-300">
                            <div class="active-gradient w-full h-full text-base md:text-lg justify-center text-[#101010] bg-[linear-gradient(#f4f4f4,#fefefe)] group-hover:bg-[linear-gradient(#e2e2e2,#fefefe)] duration-200 items-center font-medium gap-2 inline-flex overflow-hidden px-3 md:px-4 py-2 rounded-full group-hover:text-[var(--primary-color)]">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
                                <span class="hidden md:inline">Anuncios</span>
                            </div>
                        </div>
                    </button>
                </nav>
                <div class="w-px h-6 bg-gray-300 hidden md:block"></div>
                <nav class="flex items-center gap-1 md:gap-2">
                    <button id="open-revisiones-btn" class="main-nav-btn group w-auto h-12 inline-flex transition-all duration-300 overflow-visible p-1 rounded-full">
                        <div class="w-full h-full bg-[linear-gradient(to_top,#ececec,#fff)] overflow-hidden shadow-[0_0_1px_rgba(0,0,0,0.07),0_0_1px_rgba(0,0,0,0.05),0_3px_3px_rgba(0,0,0,0.25),0_1px_3px_rgba(0,0,0,0.12)] p-1 rounded-full group-hover:shadow-none duration-300">
                            <div class="active-gradient w-full h-full text-base md:text-lg justify-center text-[#101010] bg-[linear-gradient(#f4f4f4,#fefefe)] group-hover:bg-[linear-gradient(#e2e2e2,#fefefe)] duration-200 items-center font-medium gap-2 inline-flex overflow-hidden px-3 md:px-4 py-2 rounded-full group-hover:text-[var(--primary-color)]">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 11 12 14 22 4"></polyline><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path></svg>
                                <span class="hidden md:inline">Revisiones</span>
                            </div>
                        </div>
                    </button>
                    <button id="open-habilidades-btn" class="main-nav-btn group w-auto h-12 inline-flex transition-all duration-300 overflow-visible p-1 rounded-full">
                        <div class="w-full h-full bg-[linear-gradient(to_top,#ececec,#fff)] overflow-hidden shadow-[0_0_1px_rgba(0,0,0,0.07),0_0_1px_rgba(0,0,0,0.05),0_3px_3px_rgba(0,0,0,0.25),0_1px_3px_rgba(0,0,0,0.12)] p-1 rounded-full group-hover:shadow-none duration-300">
                            <div class="active-gradient w-full h-full text-base md:text-lg justify-center text-[#101010] bg-[linear-gradient(#f4f4f4,#fefefe)] group-hover:bg-[linear-gradient(#e2e2e2,#fefefe)] duration-200 items-center font-medium gap-2 inline-flex overflow-hidden px-3 md:px-4 py-2 rounded-full group-hover:text-[var(--primary-color)]">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="8" r="7"></circle><polyline points="8.21 13.89 7 23 12 18 17 23 15.79 13.88"></polyline></svg>
                                <span class="hidden md:inline">Habilidades</span>
                            </div>
                        </div>
                    </button>
                    <button id="open-tareas-btn" class="main-nav-btn group w-auto h-12 inline-flex transition-all duration-300 overflow-visible p-1 rounded-full">
                        <div class="w-full h-full bg-[linear-gradient(to_top,#ececec,#fff)] overflow-hidden shadow-[0_0_1px_rgba(0,0,0,0.07),0_0_1px_rgba(0,0,0,0.05),0_3px_3px_rgba(0,0,0,0.25),0_1px_3px_rgba(0,0,0,0.12)] p-1 rounded-full group-hover:shadow-none duration-300">
                            <div class="active-gradient w-full h-full text-base md:text-lg justify-center text-[#101010] bg-[linear-gradient(#f4f4f4,#fefefe)] group-hover:bg-[linear-gradient(#e2e2e2,#fefefe)] duration-200 items-center font-medium gap-2 inline-flex overflow-hidden px-3 md:px-4 py-2 rounded-full group-hover:text-[var(--primary-color)]">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="8" y1="6" x2="21" y2="6"></line><line x1="8" y1="12" x2="21" y2="12"></line><line x1="8" y1="18" x2="21" y2="18"></line><line x1="3" y1="6" x2="3.01" y2="6"></line><line x1="3" y1="12" x2="3.01" y2="12"></line><line x1="3" y1="18" x2="3.01" y2="18"></line></svg>
                                <span class="hidden md:inline">Tareas</span>
                            </div>
                        </div>
                    </button>
                </nav>
                <div id="current-user-display" class="text-sm text-gray-700 font-semibold hidden bg-gray-100 px-3 py-1 rounded-full items-center gap-2"></div>
            </div>
        </header>
        
        <div class="flex flex-col lg:flex-row flex-grow overflow-hidden">
            <aside class="w-full lg:w-80 bg-gray-100 p-4 md:p-6 flex flex-col space-y-4 md:space-y-6 border-b lg:border-r border-gray-200 overflow-y-auto">
                <div class="text-center bg-white p-4 rounded-xl shadow-lg">
                    <div id="clock" class="text-2xl md:text-3xl font-semibold text-gray-800"></div>
                    <div id="date" class="text-base md:text-lg text-gray-500"></div>
                </div>

                <div class="flex-grow flex flex-col bg-white p-4 rounded-xl shadow-lg overflow-hidden">
                    <h2 class="text-lg md:text-xl font-semibold mb-3 text-gray-700">Próximos Recordatorios</h2>
                    <div id="reminders-list" class="space-y-2 overflow-y-auto pr-2 max-h-40 lg:max-h-full">
                    </div>
                </div>
                
                 <div class="bg-white p-4 rounded-xl shadow-lg">
                    <h2 class="text-base md:text-lg font-semibold mb-3 text-gray-700">Copia de Seguridad</h2>
                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-2">
                        <button id="export-data-btn" class="btn btn-secondary w-full text-sm">Exportar Datos</button>
                        <button id="import-data-btn" class="btn btn-secondary w-full text-sm">Importar Datos</button>
                        <input type="file" id="import-file-input" class="hidden" accept=".json">
                    </div>
                </div>
            </aside>

            <main class="flex-1 p-2 sm:p-4 md:p-6 lg:p-8 flex flex-col overflow-y-auto">
                <div class="bg-white rounded-xl shadow-lg flex-grow flex flex-col">
                    <header class="flex flex-col sm:flex-row items-center justify-between p-4 border-b border-gray-200 gap-4 sm:gap-2">
                        <div class="flex items-center space-x-2">
                            <h2 id="month-year" class="text-xl font-bold text-gray-800"></h2>
                            <div class="flex items-center">
                                 <button id="prev-month" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                                     <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg>
                                 </button>
                                 <button id="next-month" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                                     <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>
                                 </button>
                            </div>
                             <button id="today-btn" class="btn btn-secondary text-sm">Hoy</button>
                        </div>
                    </header>
                    
                    <div class="calendar-grid grid border-b border-gray-200">
                        <div class="text-center font-semibold p-2 text-gray-500 text-xs sm:text-sm">Dom</div>
                        <div class="text-center font-semibold p-2 text-gray-500 text-xs sm:text-sm">Lun</div>
                        <div class="text-center font-semibold p-2 text-gray-500 text-xs sm:text-sm">Mar</div>
                        <div class="text-center font-semibold p-2 text-gray-500 text-xs sm:text-sm">Mié</div>
                        <div class="text-center font-semibold p-2 text-gray-500 text-xs sm:text-sm">Jue</div>
                        <div class="text-center font-semibold p-2 text-gray-500 text-xs sm:text-sm">Vie</div>
                        <div class="text-center font-semibold p-2 text-gray-500 text-xs sm:text-sm">Sáb</div>
                    </div>
                    <div id="calendar-days" class="calendar-grid grid flex-grow">
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div id="day-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-lg flex flex-col max-h-[90vh] transform transition-all duration-300 scale-95 opacity-0">
            <header class="p-4 border-b border-gray-200 flex justify-between items-center">
                <h3 id="modal-date" class="text-lg font-semibold text-gray-800"></h3>
                <button id="close-modal-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                    <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </header>
            <div class="p-6 overflow-y-auto space-y-6">
                <div>
                    <h4 class="font-semibold text-gray-700 mb-2">Recordatorios del Día</h4>
                    <div id="modal-events-list" class="space-y-2"></div>
                    <form id="add-event-form" class="mt-4 flex space-x-2">
                        <input type="text" id="event-input" placeholder="Añadir nuevo recordatorio..." class="form-input flex-grow">
                        <button type="submit" class="btn btn-primary">Añadir</button>
                    </form>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-700 mb-2">Notas del Día</h4>
                    <textarea id="notes-textarea" rows="6" class="form-input" placeholder="Escribe tus notas aquí..."></textarea>
                    <div id="notes-modifier-info" class="text-xs text-right text-gray-500 mt-1 h-4"></div>
                </div>
            </div>
            <footer class="p-4 bg-gray-50 border-t border-gray-200 text-right">
                <button id="save-notes-btn" class="btn btn-primary">Guardar Notas</button>
            </footer>
        </div>
    </div>
    
    <div id="manual-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-4xl flex flex-col max-h-[90vh] transform transition-all duration-300 scale-95 opacity-0">
            <header class="p-4 border-b border-gray-200 flex justify-between items-center">
                <h3 id="manual-modal-title" class="text-lg font-semibold text-gray-800"></h3>
                <button id="close-manual-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                    <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </header>
            <div id="manual-content" class="p-6 overflow-y-auto flex-grow bg-gray-50">
                <div id="tab-content-agenda" class="tab-pane"></div>
                <div id="tab-content-revisiones" class="tab-pane space-y-6"></div>
                <div id="tab-content-habilidades" class="tab-pane">
                    <textarea id="manual-habilidades-text" class="w-full h-full p-3 border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500" style="min-height: 65vh;"></textarea>
                </div>
                <div id="tab-content-tareas" class="tab-pane"></div>
            </div>
        </div>
    </div>
    
    <div id="directory-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-5xl flex flex-col max-h-[90vh] transform transition-all duration-300 scale-95 opacity-0">
            <header class="p-4 border-b border-gray-200 flex justify-between items-center">
                <h3 class="text-lg font-semibold text-gray-800">Directorio Parroquial</h3>
                <button id="close-directory-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                    <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </header>
            <div class="flex-grow flex md:flex-row flex-col overflow-hidden">
                <div class="w-full md:w-1/3 p-6 border-b md:border-b-0 md:border-r border-gray-200 bg-gray-50 overflow-y-auto">
                    <h4 id="contact-form-title" class="text-xl font-semibold mb-4 text-gray-700">Añadir Contacto</h4>
                    <form id="add-contact-form" class="space-y-4">
                        <input type="hidden" id="contact-id">
                        <div>
                            <label for="nombre" class="block text-sm font-medium text-gray-600">Nombre Completo</label>
                            <input type="text" name="nombre" id="nombre" class="form-input mt-1" required>
                        </div>
                        <div>
                            <label for="domicilio" class="block text-sm font-medium text-gray-600">Domicilio</label>
                            <input type="text" name="domicilio" id="domicilio" class="form-input mt-1">
                        </div>
                        <div>
                            <label for="telefono" class="block text-sm font-medium text-gray-600">Teléfono</label>
                            <input type="tel" name="telefono" id="telefono" class="form-input mt-1">
                        </div>
                         <div>
                            <label for="email" class="block text-sm font-medium text-gray-600">Correo Electrónico</label>
                            <input type="email" name="email" id="email" class="form-input mt-1">
                        </div>
                        <div>
                            <label for="tipoSangre" class="block text-sm font-medium text-gray-600">Tipo de Sangre</label>
                            <input type="text" name="tipoSangre" id="tipoSangre" class="form-input mt-1">
                        </div>
                        <div>
                            <label for="alergias" class="block text-sm font-medium text-gray-600">Alergias</label>
                            <textarea name="alergias" id="alergias" rows="2" class="form-input mt-1"></textarea>
                        </div>
                        <div>
                            <label for="enfermedades" class="block text-sm font-medium text-gray-600">Enfermedades</label>
                            <textarea name="enfermedades" id="enfermedades" rows="2" class="form-input mt-1"></textarea>
                        </div>
                         <div>
                            <label for="medicamentos" class="block text-sm font-medium text-gray-600">Medicamentos en Uso</label>
                            <textarea name="medicamentos" id="medicamentos" rows="2" class="form-input mt-1"></textarea>
                        </div>
                        <div class="flex space-x-2 pt-2">
                             <button type="submit" class="btn btn-primary w-full">Guardar</button>
                             <button type="button" id="clear-contact-form" class="btn btn-secondary w-full">Nuevo</button>
                        </div>
                    </form>
                </div>
                <div class="w-full md:w-2/3 p-6 flex flex-col overflow-hidden">
                     <input type="text" id="search-contact-input" placeholder="Buscar por nombre..." class="form-input mb-4">
                     <div id="directory-list" class="flex-grow overflow-y-auto space-y-3 pr-2">
                     </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="add-task-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-md flex flex-col transform transition-all duration-300 scale-95 opacity-0">
            <header class="p-4 border-b border-gray-200"><h3 id="add-task-title" class="text-lg font-semibold text-gray-800">Añadir Tarea al Calendario</h3></header>
            <form id="add-task-form" class="p-6 space-y-4">
                <div><label for="task-details" class="block text-sm font-medium text-gray-600">Tarea y Comentarios</label><textarea id="task-details" rows="3" class="form-input mt-1" required></textarea></div>
                <div class="grid grid-cols-2 gap-4">
                    <div><label for="task-date" class="block text-sm font-medium text-gray-600">Fecha</label><input type="date" id="task-date" class="form-input mt-1" required></div>
                    <div><label for="task-time" class="block text-sm font-medium text-gray-600">Hora</label><input type="time" id="task-time" class="form-input mt-1"></div>
                </div>
            </form>
            <footer class="p-4 bg-gray-50 border-t border-gray-200 flex justify-end space-x-2">
                <button id="close-task-modal-btn" type="button" class="btn btn-secondary">Cancelar</button>
                <button id="save-task-btn" type="button" class="btn btn-primary">Guardar Tarea</button>
            </footer>
        </div>
    </div>

    <div id="reason-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-lg transform transition-all duration-300 scale-95 opacity-0">
            <header class="p-4 border-b"><h3 class="text-lg font-semibold text-gray-800">Tareas Incompletas</h3></header>
            <div class="p-6">
                <p class="mb-4 text-gray-600">Por favor, indica por qué las siguientes tareas no se completaron:</p>
                <form id="reason-form" class="space-y-4 max-h-80 overflow-y-auto"></form>
            </div>
            <footer class="p-4 bg-gray-50 flex justify-end">
                <button id="save-reasons-btn" class="btn btn-primary">Guardar y Finalizar</button>
            </footer>
        </div>
    </div>

    <div id="stats-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-2xl flex flex-col max-h-[90vh] transform transition-all duration-300 scale-95 opacity-0">
            <header class="p-4 border-b flex justify-between items-center">
                <h3 id="stats-title" class="text-lg font-semibold text-gray-800">Estadísticas de Revisiones</h3>
                <button id="close-stats-btn" class="p-2 rounded-full hover:bg-gray-100">&times;</button>
            </header>
            <div id="stats-content" class="p-6 overflow-y-auto"></div>
        </div>
    </div>
    
    <div id="confirm-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-lg w-full max-w-sm transform transition-all duration-300 scale-95 opacity-0">
            <div class="p-6 text-center">
                <h3 class="text-lg font-semibold mb-2 text-gray-800">Confirmar Acción</h3>
                <p id="confirm-modal-text" class="text-gray-600 mb-6"></p>
                <div class="flex justify-center space-x-3">
                    <button id="confirm-modal-cancel-btn" class="btn btn-secondary w-full">Cancelar</button>
                    <button id="confirm-modal-confirm-btn" class="btn btn-danger w-full">Confirmar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" class="fixed inset-0 bg-gray-900 bg-opacity-80 flex items-center justify-center p-4 z-[100]">
        <div class="bg-white p-8 rounded-2xl shadow-lg w-full max-w-sm">
            <h2 class="text-2xl font-bold mb-4 text-center text-gray-800">Iniciar Sesión</h2>
            <form id="login-form">
                <div class="mb-4">
                    <label for="login-email" class="block text-sm font-medium text-gray-600 mb-1">Correo Electrónico</label>
                    <input type="email" id="login-email" class="form-input" required>
                </div>
                <div class="mb-6">
                    <label for="login-password" class="block text-sm font-medium text-gray-600 mb-1">Contraseña</label>
                    <input type="password" id="login-password" class="form-input" required>
                </div>
                <button type="submit" class="w-full btn btn-primary">Iniciar Sesión</button>
                <p id="login-error" class="text-red-500 text-sm mt-4 text-center h-4"></p>
            </form>
            <div class="flex items-center my-6">
                <div class="flex-grow border-t border-gray-300"></div>
                <span class="flex-shrink mx-4 text-gray-500 text-sm">O</span>
                <div class="flex-grow border-t border-gray-300"></div>
            </div>
            <button id="google-login-btn" class="w-full h-12 rounded-lg flex justify-center items-center font-medium gap-3 border border-gray-300 bg-white cursor-pointer transition-all duration-200 ease-in-out hover:border-[var(--primary-color)] hover:shadow-md">
                <svg xml:space="preserve" style="enable-background:new 0 0 512 512;" viewBox="0 0 512 512" y="0px" x="0px" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" id="Layer_1" width="20" version="1.1">
                    <path d="M113.47,309.408L95.648,375.94l-65.139,1.378C11.042,341.211,0,299.9,0,256 c0-42.451,10.324-82.483,28.624-117.732h0.014l57.992,10.632l25.404,57.644c-5.317,15.501-8.215,32.141-8.215,49.456 C103.821,274.792,107.225,292.797,113.47,309.408z" style="fill:#FBBB00;"></path>
                    <path d="M507.527,208.176C510.467,223.662,512,239.655,512,256c0,18.328-1.927,36.206-5.598,53.451 c-12.462,58.683-45.025,109.925-90.134,146.187l-0.014-0.014l-73.044-3.727l-10.338-64.535 c29.932-17.554,53.324-45.025,65.646-77.911h-136.89V208.176h138.887L507.527,208.176L507.527,208.176z" style="fill:#518EF8;"></path>
                    <path d="M416.253,455.624l0.014,0.014C372.396,490.901,316.666,512,256,512 c-97.491,0-182.252-54.491-225.491-134.681l82.961-67.91c21.619,57.698,77.278,98.771,142.53,98.771 c28.047,0,54.323-7.582,76.87-20.818L416.253,455.624z" style="fill:#28B446;"></path>
                    <path d="M419.404,58.936l-82.933,67.896c-23.335-14.586-50.919-23.012-80.471-23.012 c-66.729,0-123.429,42.957-143.965,102.724l-83.397-68.276h-0.014C71.23,56.123,157.06,0,256,0 C318.115,0,375.068,22.126,419.404,58.936z" style="fill:#F14336;"></path>
                </svg>
                <span>Continuar con Google</span>
            </button>
        </div>
    </div>

    <div id="anuncios-modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4 z-50 transition-opacity duration-300">
        <div class="bg-white rounded-xl shadow-xl w-full max-w-2xl flex flex-col max-h-[90vh] transform transition-all duration-300 scale-95 opacity-0">
            <header class="p-4 border-b border-gray-200 flex justify-between items-center">
                <h3 class="text-lg font-semibold text-gray-800">Anuncios Parroquiales</h3>
                <button id="close-anuncios-btn" class="p-2 rounded-full hover:bg-gray-100 transition-colors">
                    <svg class="w-6 h-6 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </header>
            <div class="p-6 flex-grow overflow-y-auto space-y-6">
                <form id="add-anuncio-form" class="space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200 hidden">
                    <div>
                        <label for="anuncio-title" class="block text-sm font-medium text-gray-600">Título del Anuncio</label>
                        <input type="text" id="anuncio-title" class="form-input mt-1" required>
                    </div>
                    <div>
                        <label for="anuncio-content" class="block text-sm font-medium text-gray-600">Contenido del Anuncio</label>
                        <textarea id="anuncio-content" rows="4" class="form-input mt-1" required></textarea>
                    </div>
                    <div class="text-right">
                        <button type="submit" class="btn btn-primary">Publicar Anuncio</button>
                    </div>
                </form>
                <div id="anuncios-list" class="space-y-4">
                </div>
            </div>
        </div>
    </div>


    <script src="/firebase-config.js"></script>
    <script src="/app.js" type="module"></script>
</body>
</html>